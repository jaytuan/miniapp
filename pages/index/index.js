/*! For license information please see index.js.LICENSE.txt */
(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[8],{100:function(t,e,a){},101:function(t,e,a){},102:function(t,e,a){},103:function(t,e,a){},104:function(t,e,a){"use strict";a.r(e);var s=a(7),n=a(9),c=a(10),r=a(12),o=a(13),i=a(5),l=a.n(i),u=a(19),p=a.n(u),b=a(1),m=a(40),d=a(17),j=a.n(d),h=a(11),f=a.n(h),v=a(14),x=a.n(v),O=(a(94),a(18)),g=a(2),y=a(15),k=a(0),N=setTimeout,C=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.call(this),t.state={clearLines:!1,animateColor:2,isOver:!1,overState:null},t}return Object(c["a"])(a,[{key:"componentWillReceiveProps",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=O["a"].isClear(t.matrix),a=t.reset;this.setState({clearLines:e,isOver:a}),e&&!this.state.clearLines&&this.clearAnimate(e),e||!a||this.state.isOver||this.over(t)}},{key:"shouldComponentUpdate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.props;return!(x.a.is(t.matrix,e.matrix)&&x.a.is(t.cur&&t.cur.shape,e.cur&&e.cur.shape)&&x.a.is(t.cur&&t.cur.xy,e.cur&&e.cur.xy))||this.state.clearLines||this.state.isOver}},{key:"getResult",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,e=t.cur,a=e&&e.shape,s=e&&e.xy,n=t.matrix,c=this.state.clearLines;if(c){var r=this.state.animateColor;c.forEach((function(t){n=n.set(t,Object(v["List"])([r,r,r,r,r,r,r,r,r,r]))}))}else a&&a.forEach((function(t,e){return t.forEach((function(t,a){if(t&&s.get(0)+e>=0){var r,o=n.get(s.get(0)+e);r=1!==o.get(s.get(1)+a)||c?1:2,o=o.set(s.get(1)+a,r),n=n.set(s.get(0)+e,o)}}))}));return n}},{key:"clearAnimate",value:function(){var t=this,e=function(e){N((function(){t.setState({animateColor:0}),N((function(){t.setState({animateColor:2}),"function"===typeof e&&e()}),100)}),100)};e((function(){e((function(){e((function(){N((function(){y["a"].clearLines(t.props.matrix,t.state.clearLines)}),100)}))}))}))}},{key:"over",value:function(t){var e=this,a=this.getResult(t);this.setState({overState:a});for(var s=function(t){if(t<=19)a=a.set(19-t,Object(v["List"])(g["i"]));else{if(!(t>=20&&t<=39))return void y["a"].overEnd();a=a.set(t-20,Object(v["List"])(g["b"]))}e.setState({overState:a})},n=0;n<=40;n++)N(s.bind(null,n),40*(n+1))}},{key:"render",value:function(){var t;return t=this.state.isOver?this.state.overState:this.getResult(),Object(k["jsx"])(b["b"],{className:"matrix",children:t.map((function(t,e){return Object(k["jsx"])(b["b"],{className:"pClass",children:t.map((function(t,e){return Object(k["jsx"])(b["a"],{className:j()({bClass:!0,c:1===t,d:2===t})},e)}))},e)}))})}}]),a}(l.a.Component);C.propTypes={matrix:f.a.object.isRequired,cur:f.a.object,reset:f.a.bool.isRequired};a(95);var S=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return Object(k["jsxs"])(b["b"],{className:"decorate",children:[Object(k["jsxs"])(b["b"],{className:"topBorder",children:[Object(k["jsx"])(b["a"],{className:j()(["l","mr","spanClass"]),style:{width:p.a.pxTransform(40)}}),Object(k["jsx"])(b["a"],{className:j()(["l","mr","spanClass"])}),Object(k["jsx"])(b["a"],{className:j()(["l","mr","spanClass"])}),Object(k["jsx"])(b["a"],{className:j()(["l","mr","spanClass"])}),Object(k["jsx"])(b["a"],{className:j()(["l","mr","spanClass"])}),Object(k["jsx"])(b["a"],{className:j()(["r","ml","spanClass"]),style:{width:p.a.pxTransform(40)}}),Object(k["jsx"])(b["a"],{className:j()(["r","ml","spanClass"])}),Object(k["jsx"])(b["a"],{className:j()(["r","ml","spanClass"])}),Object(k["jsx"])(b["a"],{className:j()(["r","ml","spanClass"])}),Object(k["jsx"])(b["a"],{className:j()(["r","ml","spanClass"])})]}),Object(k["jsx"])(b["b"],{className:"h1",children:g["j"].title[g["k"]]}),Object(k["jsxs"])(b["b"],{className:"view_contain",children:[Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"})]}),Object(k["jsxs"])(b["b"],{className:j()("view_contain","l"),children:[Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"em"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"pClass"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"}),Object(k["jsx"])(b["b"],{className:"clear"}),Object(k["jsx"])(b["a"],{className:"c bClass"})]})]})}}]),a}(l.a.Component),w=(a(96),function(t){return Object(k["jsx"])(b["b"],{className:"number",children:t.map((function(t,e){return Object(k["jsx"])(b["a"],{className:j()(["spanClass","bg","s_".concat(t)])},e)}))})}),T=function(t){return t<10?"0".concat(t).split(""):"".concat(t).split("")},R=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.call(this),t.state={time_count:!1,time:new Date},t}return Object(c["a"])(a,[{key:"componentWillMount",value:function(){var t=this;if(this.props.time){var e=function e(){var s=+a.timeInterval;a.timeInterval=setTimeout((function(){t.setState({time:new Date,time_count:s}),e()}),1e3)};e()}}},{key:"shouldComponentUpdate",value:function(t){var e=t.number;return this.props.time?this.state.time_count!==a.time_count&&(!1!==this.state.time_count&&(a.time_count=this.state.time_count),!0):this.props.number!==e}},{key:"componentWillUnmount",value:function(){this.props.time&&clearTimeout(a.timeInterval)}},{key:"render",value:function(){if(this.props.time){var t=this.state.time,e=T(t.getHours()),a=T(t.getMinutes()),s=t.getSeconds()%2,n=e.concat(s?"d":"d_c",a);return w(n)}for(var c="".concat(this.props.number).split(""),r=0,o=this.props.length-c.length;r<o;r++)c.unshift("n");return w(c)}}]),a}(l.a.Component);R.statics={timeInterval:null,time_count:null},R.propTypes={number:f.a.number,length:f.a.number,time:f.a.bool},R.defaultProps={length:6};var L=a(20),E=(a(97),{I:[1,0],L:[0,0],J:[0,0],Z:[0,0],S:[0,0],O:[0,1],T:[0,0]}),q=[[0,0,0,0],[0,0,0,0]],I=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.call(this),t.state={block:q},t}return Object(c["a"])(a,[{key:"componentWillMount",value:function(){this.build(this.props.data)}},{key:"componentWillReceiveProps",value:function(t){this.build(t.data)}},{key:"shouldComponentUpdate",value:function(t){return t.data!==this.props.data}},{key:"build",value:function(t){var e=g["d"][t],a=q.map((function(t){return Object(L["a"])(t)}));e.forEach((function(e,s){e.forEach((function(e,n){e&&(a[s+E[t][0]][n+E[t][1]]=1)}))})),this.setState({block:a})}},{key:"render",value:function(){return Object(k["jsx"])(b["b"],{className:"next",children:this.state.block.map((function(t,e){return Object(k["jsx"])(b["b"],{className:"divClass",children:t.map((function(t,e){return Object(k["jsx"])(b["a"],{className:t?"c bClass":"bClass"},e)}))},e)}))})}}]),a}(l.a.Component);I.propTypes={data:f.a.string};a(98);var P=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"shouldComponentUpdate",value:function(t){var e=t.data;return e!==this.props.data}},{key:"render",value:function(){return Object(k["jsx"])(b["b"],{className:j()({bg:!0,music:!0,c:!this.props.data})})}}]),a}(l.a.Component);P.propTypes={data:f.a.bool.isRequired};a(99);var B=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.call(this),t.state={showPause:!1},t}return Object(c["a"])(a,[{key:"componentDidMount",value:function(){this.setShake(this.props.data)}},{key:"componentWillReceiveProps",value:function(t){var e=t.data;this.setShake(e)}},{key:"shouldComponentUpdate",value:function(t){var e=t.data;return!!e||e!==this.props.data}},{key:"setShake",value:function(t){var e=this;t&&!a.timeout&&(a.timeout=setInterval((function(){e.setState({showPause:!e.state.showPause})}),250)),!t&&a.timeout&&(clearInterval(a.timeout),this.setState({showPause:!1}),a.timeout=null)}},{key:"render",value:function(){return Object(k["jsx"])(b["b"],{className:j()({bg:!0,pause:!0,c:this.state.showPause})})}}]),a}(l.a.Component);B.statics={timeout:null},B.propTypes={data:f.a.bool.isRequired},B.defaultProps={data:!1};var D=g["j"].point[g["k"]],_=g["j"].highestScore[g["k"]],M=g["j"].lastRound[g["k"]],U=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.call(this),t.state={label:"",number:0},t}return Object(c["a"])(a,[{key:"componentWillMount",value:function(){this.onChange(this.props)}},{key:"componentWillReceiveProps",value:function(t){this.onChange(t)}},{key:"shouldComponentUpdate",value:function(t){var e=t.cur,a=t.point,s=t.max,n=this.props;return e!==n.cur||a!==n.point||s!==n.max||!n.cur}},{key:"onChange",value:function(t){var e=this,s=t.cur,n=t.point,c=t.max;if(clearInterval(a.timeout),s)this.setState({label:n>=c?_:D,number:n});else{var r=function t(){e.setState({label:M,number:n}),a.timeout=setTimeout((function(){e.setState({label:_,number:c}),a.timeout=setTimeout(t,3e3)}),3e3)};0!==n?r():this.setState({label:_,number:c})}}},{key:"render",value:function(){return Object(k["jsxs"])(b["b"],{children:[Object(k["jsx"])(b["b"],{className:"pClass",children:this.state.label}),Object(k["jsx"])(R,{number:this.state.number})]})}}]),a}(l.a.Component);U.statics={timeout:null},U.propTypes={cur:f.a.bool,max:f.a.number.isRequired,point:f.a.number.isRequired};var W=a(22),z=(a(100),function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){var t;return Object(n["a"])(this,a),t=e.call(this),t.state={style:"r1",display:"none"},t}return Object(c["a"])(a,[{key:"componentWillMount",value:function(){this.animate(this.props)}},{key:"componentWillReceiveProps",value:function(t){(-1!==[this.props.cur,t.cur].indexOf(!1)&&this.props.cur!==t.cur||this.props.reset!==t.reset)&&this.animate(t)}},{key:"shouldComponentUpdate",value:function(t){var e=t.cur,a=t.reset;return e!==this.props.cur||a!==this.props.reset||!e}},{key:"animate",value:function(t){var e=this,s=t.cur,n=t.reset;if(clearTimeout(a.timeout),this.setState({style:"r1",display:"none"}),s||n)this.setState({display:"none"});else{var c="r",r=0,o=function(t,e){t&&(a.timeout=setTimeout(t,e))},i=function(t){o((function(){e.setState({display:"block"}),t&&t()}),150)},l=function(t){o((function(){e.setState({display:"none"}),t&&t()}),150)},u=function(t,a,s){o((function(){e.setState({style:c+2}),o((function(){e.setState({style:c+1}),t&&t()}),s)}),a)},p=function t(a){o((function(){e.setState({style:c+4}),o((function(){e.setState({style:c+3}),r++,10!==r&&20!==r&&30!==r||(c="r"===c?"l":"r"),r<40?t(a):(e.setState({style:c+1}),a&&o(a,4e3))}),100)}),100)},b=function t(){r=0,u((function(){u((function(){u((function(){e.setState({style:c+2}),p(t)}),150,150)}),150,150)}),1e3,1500)};i((function(){l((function(){i((function(){l((function(){i((function(){b()}))}))}))}))}))}}},{key:"render",value:function(){return this.props.cur?null:Object(k["jsxs"])(b["b"],{className:"logo",style:{display:this.state.display},children:[Object(k["jsx"])(b["b"],{className:j()(Object(W["a"])({bg:!0,dragon:!0},this.state.style,!0))}),Object(k["jsx"])(b["b"],{className:"pClass",dangerouslySetInnerHTML:{__html:g["j"].titleCenter[g["k"]]}})]})}}]),a}(l.a.Component));z.propTypes={cur:f.a.bool,reset:f.a.bool.isRequired},z.statics={timeout:null};var A=a(59),J=(a(103),function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),e.call(this)}return Object(c["a"])(a,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){if(g["l"]){if(g["l"].cur&&!g["l"].pause){var t=this.props.speedRun,e=g["o"][t-1]/2;e=t<g["o"][g["o"].length-1]?g["o"][g["o"].length-1]:t,y["a"].auto(e)}g["l"].cur||y["a"].overStart()}else y["a"].overStart()}},{key:"render",value:function(){return Object(k["jsxs"])(b["b"],{className:"app",children:[Object(k["jsxs"])(b["b"],{className:j()({rect:!0,drop:this.props.drop}),children:[Object(k["jsx"])(S,{}),Object(k["jsx"])(b["b"],{className:"screen",children:Object(k["jsxs"])(b["b"],{className:"panel",children:[Object(k["jsx"])(C,{matrix:this.props.matrix,cur:this.props.cur,reset:this.props.reset}),Object(k["jsx"])(z,{cur:!!this.props.cur,reset:this.props.reset}),Object(k["jsxs"])(b["b"],{className:"state",children:[Object(k["jsx"])(U,{cur:!!this.props.cur,point:this.props.points,max:this.props.max}),Object(k["jsx"])(b["b"],{className:"pClass",children:this.props.cur?g["j"].cleans[g["k"]]:g["j"].startLine[g["k"]]}),Object(k["jsx"])(R,{number:this.props.cur?this.props.clearLines:this.props.startLines}),Object(k["jsx"])(b["b"],{className:"pClass",children:g["j"].level[g["k"]]}),Object(k["jsx"])(R,{number:this.props.cur?this.props.speedRun:this.props.speedStart,length:1}),Object(k["jsx"])(b["b"],{className:"pClass",children:g["j"].next[g["k"]]}),Object(k["jsx"])(I,{data:this.props.next}),Object(k["jsxs"])(b["b"],{className:"bottom",children:[Object(k["jsx"])(P,{data:this.props.music}),Object(k["jsx"])(B,{data:this.props.pause}),Object(k["jsx"])(R,{time:!0})]})]})]})})]}),Object(k["jsx"])(A["a"],{keyboard:this.props.keyboard})]})}}]),a}(i["Component"]));J.propTypes={music:f.a.bool.isRequired,pause:f.a.bool.isRequired,matrix:f.a.object.isRequired,next:f.a.string.isRequired,cur:f.a.object,dispatch:f.a.func.isRequired,speedStart:f.a.number.isRequired,speedRun:f.a.number.isRequired,startLines:f.a.number.isRequired,clearLines:f.a.number.isRequired,points:f.a.number.isRequired,max:f.a.number.isRequired,reset:f.a.bool.isRequired,drop:f.a.bool.isRequired,keyboard:f.a.object.isRequired};var H=function(t){return{pause:t.get("pause"),music:t.get("music"),matrix:t.get("matrix"),next:t.get("next"),cur:t.get("cur"),speedStart:t.get("speedStart"),speedRun:t.get("speedRun"),startLines:t.get("startLines"),clearLines:t.get("clearLines"),points:t.get("points"),max:t.get("max"),reset:t.get("reset"),drop:t.get("drop"),keyboard:t.get("keyboard")}},Z=Object(m["b"])(H)(J),F={navigationBarTitleText:"\u4fc4\u7f57\u65af\u65b9\u5757"};Page(Object(s["createPageConfig"])(Z,"pages/index/index",{root:{cn:[]}},F||{}))},15:function(t,e,a){"use strict";var s=a(14),n=a(8),c=a(18),r=a(6),o=a(2),i=a(16),l=function(t){for(var e=function(t,e){for(var a=parseInt((e-t+1)*Math.random()+t,10),n=[],c=0;c<a;c++)n.push(1);for(var r=0,o=10-a;r<o;r++){var i=parseInt((n.length+1)*Math.random(),10);n.splice(i,0,0)}return Object(s["List"])(n)},a=Object(s["List"])([]),n=0;n<t;n++)a=n<=2?a.push(e(5,8)):n<=6?a.push(e(4,9)):a.push(e(3,9));for(var c=0,r=20-t;c<r;c++)a=a.unshift(Object(s["List"])(o["b"]));return a},u={fallInterval:null,start:function(){i["b"].start&&i["b"].start();var t=n["a"].getState();u.dispatchPoints(0),n["a"].dispatch(r["a"].speedRun(t.get("speedStart")));var e=t.get("startLines"),a=l(e);n["a"].dispatch(r["a"].matrix(a)),n["a"].dispatch(r["a"].moveBlock({type:t.get("next")})),n["a"].dispatch(r["a"].nextBlock()),u.auto()},auto:function(t){var e=t<0?0:t,a=n["a"].getState(),s=a.get("cur"),i=function t(){a=n["a"].getState(),s=a.get("cur");var e=s.fall();if(c["a"].want(e,a.get("matrix")))n["a"].dispatch(r["a"].moveBlock(e)),u.fallInterval=setTimeout(t,o["o"][a.get("speedRun")-1]);else{var i=a.get("matrix"),l=s&&s.shape,p=s&&s.xy;l.forEach((function(t,e){return t.forEach((function(t,a){if(t&&p.get(0)+e>=0){var s=i.get(p.get(0)+e);s=s.set(p.get(1)+a,1),i=i.set(p.get(0)+e,s)}}))})),u.nextAround(i)}};clearTimeout(u.fallInterval),u.fallInterval=setTimeout(i,void 0===e?o["o"][a.get("speedRun")-1]:e)},nextAround:function(t,e){clearTimeout(u.fallInterval),n["a"].dispatch(r["a"].lock(!0)),n["a"].dispatch(r["a"].matrix(t)),"function"===typeof e&&e();var a=n["a"].getState().get("points")+10+2*(n["a"].getState().get("speedRun")-1);if(u.dispatchPoints(a),!c["a"].isClear(t))return c["a"].isOver(t)?(i["b"].gameover&&i["b"].gameover(),void u.overStart()):void setTimeout((function(){n["a"].dispatch(r["a"].lock(!1)),n["a"].dispatch(r["a"].moveBlock({type:n["a"].getState().get("next")})),n["a"].dispatch(r["a"].nextBlock()),u.auto()}),100);i["b"].clear&&i["b"].clear()},focus:function(t){if(n["a"].dispatch(r["a"].focus(t)),t){var e=n["a"].getState();!e.get("cur")||e.get("reset")||e.get("pause")||u.auto()}else clearTimeout(u.fallInterval)},pause:function(t){n["a"].dispatch(r["a"].pause(t)),t?clearTimeout(u.fallInterval):u.auto()},clearLines:function(t,e){var a=n["a"].getState(),c=t;e.forEach((function(t){c=c.splice(t,1),c=c.unshift(Object(s["List"])(o["b"]))})),n["a"].dispatch(r["a"].matrix(c)),n["a"].dispatch(r["a"].moveBlock({type:a.get("next")})),n["a"].dispatch(r["a"].nextBlock()),u.auto(),n["a"].dispatch(r["a"].lock(!1));var i=a.get("clearLines")+e.length;n["a"].dispatch(r["a"].clearLines(i));var l=n["a"].getState().get("points")+o["f"][e.length-1];u.dispatchPoints(l);var p=Math.floor(i/o["h"]),b=a.get("speedStart")+p;b=b>6?6:b,n["a"].dispatch(r["a"].speedRun(b))},overStart:function(){clearTimeout(u.fallInterval),n["a"].dispatch(r["a"].lock(!0)),n["a"].dispatch(r["a"].reset(!0)),n["a"].dispatch(r["a"].pause(!1))},overEnd:function(){n["a"].dispatch(r["a"].matrix(o["c"])),n["a"].dispatch(r["a"].moveBlock({reset:!0})),n["a"].dispatch(r["a"].reset(!1)),n["a"].dispatch(r["a"].lock(!1)),n["a"].dispatch(r["a"].clearLines(0))},dispatchPoints:function(t){n["a"].dispatch(r["a"].points(t)),t>0&&t>n["a"].getState().get("max")&&n["a"].dispatch(r["a"].max(t))}};e["a"]=u},17:function(t,e,a){var s,n;(function(){"use strict";var a={}.hasOwnProperty;function c(){for(var t=[],e=0;e<arguments.length;e++){var s=arguments[e];if(s){var n=typeof s;if("string"===n||"number"===n)t.push(s);else if(Array.isArray(s)){if(s.length){var r=c.apply(null,s);r&&t.push(r)}}else if("object"===n)if(s.toString===Object.prototype.toString)for(var o in s)a.call(s,o)&&s[o]&&t.push(o);else t.push(s.toString())}}return t.join(" ")}t.exports?(c.default=c,t.exports=c):(s=[],n=function(){return c}.apply(e,s),void 0===n||(t.exports=n))})()},25:function(t,e,a){"use strict";a.d(e,"a",(function(){return v}));var s=a(22),n=a(9),c=a(10),r=a(12),o=a(13),i=a(5),l=a.n(i),u=a(17),p=a.n(u),b=a(11),m=a.n(b),d=a(19),j=a.n(d),h=a(1),f=(a(102),a(0)),v=function(t){Object(r["a"])(a,t);var e=Object(o["a"])(a);function a(){return Object(n["a"])(this,a),e.apply(this,arguments)}return Object(c["a"])(a,[{key:"shouldComponentUpdate",value:function(t){return t.active!==this.props.active}},{key:"render",value:function(){var t,e=this,a=this.props,n=a.active,c=a.color,r=a.size,o=a.top,i=a.left,l=a.label,u=a.position,b=a.arrow;return Object(f["jsxs"])(h["b"],{className:p()((t={button:!0},Object(s["a"])(t,c,!0),Object(s["a"])(t,r,!0),t)),style:{top:j.a.pxTransform(o),left:j.a.pxTransform(i)},onTouchStart:this.props.onTouchStart.bind(this),onTouchEnd:this.props.onTouchEnd.bind(this),children:[Object(f["jsx"])(h["a"],{className:p()({active:n,iClass:!0}),ref:function(t){e.dom=t}}),"s1"===r&&Object(f["jsx"])(h["a"],{className:"emClass",style:{transform:"".concat(b," scale(1,2)")}}),Object(f["jsx"])(h["b"],{className:p()({position:u,spanClass:!0}),children:l})]})}}]),a}(l.a.Component);v.propTypes={color:m.a.string.isRequired,size:m.a.string.isRequired,top:m.a.number.isRequired,left:m.a.number.isRequired,label:m.a.string.isRequired,position:m.a.bool,arrow:m.a.string,active:m.a.bool.isRequired}},47:function(t,e,a){"use strict";var s=a(18),n={},c=function(t){var e=Object.keys(n);if(e.forEach((function(t){clearTimeout(n[t]),n[t]=null})),t.callback){var a=function(){clearTimeout(n[t.key])};if(t.callback(a),!0!==t.once){var s=t.begin||100,c=t.interval||50,r=function e(){n[t.key]=setTimeout((function(){s=null,e(),t.callback(a)}),s||c)};r()}}},r=function(t){clearTimeout(n[t.key]),n[t.key]=null,t.callback&&t.callback()},o=function(){var t=Object.keys(n);t.forEach((function(t){clearTimeout(n[t]),n[t]=null}))},i={down:c,up:r,clearAll:o},l=a(6),u=a(15),p=a(2),b=a(16),m=function(t){t.dispatch(l["a"].keyboard.left(!0)),i.down({key:"left",begin:200,interval:100,callback:function(){var e=t.getState();if(!e.get("lock")){b["b"].move&&b["b"].move();var a=e.get("cur");if(null!==a){if(e.get("pause"))return void u["a"].pause(!1);var n,c=a.left(),r=p["g"][e.get("speedRun")-1];s["a"].want(c,e.get("matrix"))?(c.timeStamp+=parseInt(r,10),t.dispatch(l["a"].moveBlock(c)),n=c.timeStamp):(a.timeStamp+=parseInt(parseInt(r,10)/1.5,10),t.dispatch(l["a"].moveBlock(a)),n=a.timeStamp);var o=p["o"][e.get("speedRun")-1]-(Date.now()-n);u["a"].auto(o)}else{var i=e.get("speedStart");i=i-1<1?6:i-1,t.dispatch(l["a"].speedStart(i))}}}})},d=function(t){t.dispatch(l["a"].keyboard.left(!1)),i.up({key:"left"})},j={down:m,up:d},h=function(t){t.dispatch(l["a"].keyboard.right(!0)),i.down({key:"right",begin:200,interval:100,callback:function(){var e=t.getState();if(!e.get("lock")){b["b"].move&&b["b"].move();var a=e.get("cur");if(null!==a){if(e.get("pause"))return void u["a"].pause(!1);var n,c=a.right(),r=p["g"][e.get("speedRun")-1];s["a"].want(c,e.get("matrix"))?(c.timeStamp+=parseInt(r,10),t.dispatch(l["a"].moveBlock(c)),n=c.timeStamp):(a.timeStamp+=parseInt(parseInt(r,10)/1.5,10),t.dispatch(l["a"].moveBlock(a)),n=a.timeStamp);var o=p["o"][e.get("speedRun")-1]-(Date.now()-n);u["a"].auto(o)}else{var i=e.get("speedStart");i=i+1>6?1:i+1,t.dispatch(l["a"].speedStart(i))}}}})},f=function(t){t.dispatch(l["a"].keyboard.right(!1)),i.up({key:"right"})},v={down:h,up:f},x=function(t){t.dispatch(l["a"].keyboard.down(!0)),null!==t.getState().get("cur")?i.down({key:"down",begin:40,interval:40,callback:function(e){var a=t.getState();if(!a.get("lock")){b["b"].move&&b["b"].move();var n=a.get("cur");if(null!==n)if(a.get("pause"))u["a"].pause(!1);else{var c=n.fall();if(s["a"].want(c,a.get("matrix")))t.dispatch(l["a"].moveBlock(c)),u["a"].auto();else{var r=a.get("matrix"),o=n.shape,i=n.xy;o.forEach((function(t,e){return t.forEach((function(t,a){if(t&&i.get(0)+e>=0){var s=r.get(i.get(0)+e);s=s.set(i.get(1)+a,1),r=r.set(i.get(0)+e,s)}}))})),u["a"].nextAround(r,e)}}}}}):i.down({key:"down",begin:200,interval:100,callback:function(){if(!t.getState().get("lock")){var e=t.getState(),a=e.get("cur");if(!a){b["b"].move&&b["b"].move();var s=e.get("startLines");s=s-1<0?10:s-1,t.dispatch(l["a"].startLines(s))}}}})},O=function(t){t.dispatch(l["a"].keyboard.down(!1)),i.up({key:"down"})},g={down:x,up:O},y=function(t){t.dispatch(l["a"].keyboard.rotate(!0)),null!==t.getState().get("cur")?i.down({key:"rotate",once:!0,callback:function(){var e=t.getState();if(!e.get("lock")){e.get("pause")&&u["a"].pause(!1);var a=e.get("cur");if(null!==a){b["b"].rotate&&b["b"].rotate();var n=a.rotate();s["a"].want(n,e.get("matrix"))&&t.dispatch(l["a"].moveBlock(n))}}}}):i.down({key:"rotate",begin:200,interval:100,callback:function(){if(!t.getState().get("lock")){b["b"].move&&b["b"].move();var e=t.getState(),a=e.get("cur");if(!a){var s=e.get("startLines");s=s+1>10?0:s+1,t.dispatch(l["a"].startLines(s))}}}})},k=function(t){t.dispatch(l["a"].keyboard.rotate(!1)),i.up({key:"rotate"})},N={down:y,up:k},C=function(t){t.dispatch(l["a"].keyboard.drop(!0)),i.down({key:"space",once:!0,callback:function(){var e=t.getState();if(!e.get("lock")){var a=e.get("cur");if(null!==a){if(e.get("pause"))return void u["a"].pause(!1);b["b"].fall&&b["b"].fall();var n=0,c=a.fall(n);while(s["a"].want(c,e.get("matrix")))c=a.fall(n),n++;var r=e.get("matrix");c=a.fall(n-2),t.dispatch(l["a"].moveBlock(c));var o=c.shape,i=c.xy;o.forEach((function(t,e){return t.forEach((function(t,a){if(t&&i[0]+e>=0){var s=r.get(i[0]+e);s=s.set(i[1]+a,1),r=r.set(i[0]+e,s)}}))})),t.dispatch(l["a"].drop(!0)),setTimeout((function(){t.dispatch(l["a"].drop(!1))}),100),u["a"].nextAround(r)}else u["a"].start()}}})},S=function(t){t.dispatch(l["a"].keyboard.drop(!1)),i.up({key:"space"})},w={down:C,up:S},T=function(t){t.dispatch(l["a"].keyboard.music(!0)),t.getState().get("lock")||i.down({key:"s",once:!0,callback:function(){t.getState().get("lock")||t.dispatch(l["a"].music(!t.getState().get("music")))}})},R=function(t){t.dispatch(l["a"].keyboard.music(!1)),i.up({key:"s"})},L={down:T,up:R},E=function(t){t.dispatch(l["a"].keyboard.reset(!0)),t.getState().get("lock")||(null!==t.getState().get("cur")?i.down({key:"r",once:!0,callback:function(){u["a"].overStart()}}):i.down({key:"r",once:!0,callback:function(){t.getState().get("lock")||u["a"].start()}}))},q=function(t){t.dispatch(l["a"].keyboard.reset(!1)),i.up({key:"r"})},I={down:E,up:q},P=function(t){t.dispatch(l["a"].keyboard.pause(!0)),i.down({key:"p",once:!0,callback:function(){var e=t.getState();if(!e.get("lock")){var a=e.get("cur"),s=e.get("pause");null!==a?u["a"].pause(!s):u["a"].start()}}})},B=function(t){t.dispatch(l["a"].keyboard.pause(!1)),i.up({key:"p"})},D={down:P,up:B};e["a"]={left:j,down:g,rotate:N,right:v,space:w,r:I,p:D,s:L}},59:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return g}));var s=a(9),n=a(10),c=a(12),r=a(13),o=a(5),i=a.n(o),l=a(14),u=a.n(l),p=a(11),b=a.n(p),m=a(19),d=a.n(m),j=a(1),h=(a(101),a(25)),f=a(8),v=a(47),x=a(2),O=a(0),g=function(e){Object(c["a"])(o,e);var a=Object(r["a"])(o);function o(){return Object(s["a"])(this,o),a.apply(this,arguments)}return Object(n["a"])(o,[{key:"componentDidMount",value:function(){"web"==d.a.getEnv().toLowerCase()&&(t.addEventListener("touchstart",(function(t){t.preventDefault&&t.preventDefault()}),!0),t.addEventListener("touchend",(function(t){t.preventDefault&&t.preventDefault()}),!0),t.addEventListener("gesturestart",(function(t){t.preventDefault&&t.preventDefault()})),t.addEventListener("mousedown",(function(t){t.preventDefault&&t.preventDefault()}),!0))}},{key:"touchStart",value:function(t){console.log(t,"startstart"),v["a"][t].down(f["a"])}},{key:"touchEnd",value:function(t){console.log(t,"endend"),v["a"][t].up(f["a"])}},{key:"shouldComponentUpdate",value:function(t){var e=t.keyboard;return!u.a.is(e,this.props.keyboard)}},{key:"render",value:function(){var t=this.props.keyboard;return Object(O["jsxs"])(j["b"],{className:"keyboard",style:{marginTop:d.a.pxTransform(140)},children:[Object(O["jsx"])(h["a"],{color:"blue",size:"s1",top:0,left:438,label:x["j"].rotation[x["k"]],arrow:"translate(0, ".concat(d.a.pxTransform(74),")"),position:!0,active:t.get("rotate"),onTouchStart:this.touchStart.bind(this,"rotate"),onTouchEnd:this.touchEnd.bind(this,"rotate")}),Object(O["jsx"])(h["a"],{color:"blue",size:"s1",top:210,left:438,label:x["j"].down[x["k"]],arrow:"translate(0, -".concat(d.a.pxTransform(83),") rotate(180deg)"),active:t.get("down"),onTouchStart:this.touchStart.bind(this,"down"),onTouchEnd:this.touchEnd.bind(this,"down")}),Object(O["jsx"])(h["a"],{color:"blue",size:"s1",top:105,left:333,label:x["j"].left[x["k"]],arrow:"translate(".concat(d.a.pxTransform(70),", -").concat(d.a.pxTransform(14),") rotate(270deg)"),active:t.get("left"),onTouchStart:this.touchStart.bind(this,"left"),onTouchEnd:this.touchEnd.bind(this,"left")}),Object(O["jsx"])(h["a"],{color:"blue",size:"s1",top:105,left:544,label:x["j"].right[x["k"]],arrow:"translate(-".concat(d.a.pxTransform(70),", -").concat(d.a.pxTransform(14),") rotate(90deg)"),active:t.get("right"),onTouchStart:this.touchStart.bind(this,"right"),onTouchEnd:this.touchEnd.bind(this,"right")}),Object(O["jsx"])(h["a"],{color:"blue",size:"s0",top:117,left:61,label:"".concat(x["j"].drop[x["k"]]),active:t.get("drop"),onTouchStart:this.touchStart.bind(this,"space"),onTouchEnd:this.touchEnd.bind(this,"space")}),Object(O["jsx"])(h["a"],{color:"red",size:"s2",top:0,left:230,label:"".concat(x["j"].reset[x["k"]],"(R)"),active:t.get("reset"),onTouchStart:this.touchStart.bind(this,"r"),onTouchEnd:this.touchEnd.bind(this,"r")}),Object(O["jsx"])(h["a"],{color:"green",size:"s2",top:0,left:124,label:"".concat(x["j"].sound[x["k"]],"(S)"),active:t.get("music"),onTouchStart:this.touchStart.bind(this,"s"),onTouchEnd:this.touchEnd.bind(this,"s")}),Object(O["jsx"])(h["a"],{color:"green",size:"s2",top:0,left:19,label:"".concat(x["j"].pause[x["k"]],"(P)"),active:t.get("pause"),onTouchStart:this.touchStart.bind(this,"p"),onTouchEnd:this.touchEnd.bind(this,"p")})]})}}]),o}(i.a.Component);g.propTypes={keyboard:b.a.object.isRequired}}).call(this,a(7)["document"])},6:function(t,e,a){"use strict";var s=a(18),n=a(4),c=a(39);function r(t){return{type:n["e"],data:t}}function o(t){return{type:n["d"],data:t}}function i(t){return{type:n["f"],data:t}}function l(t){return{type:n["j"],data:t}}function u(t){return{type:n["k"],data:t}}function p(t){return{type:n["i"],data:t}}function b(t){return{type:n["g"],data:t}}function m(t){return{type:n["h"],data:t}}var d={drop:r,down:o,left:i,right:l,rotate:u,reset:p,music:b,pause:m};function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s["a"].getNextType();return{type:n["q"],data:t}}function h(t){return{type:n["o"],data:!0===t.reset?null:new c["a"](t)}}function f(t){return{type:n["v"],data:t}}function v(t){return{type:n["u"],data:t}}function x(t){return{type:n["w"],data:t}}function O(t){return{type:n["m"],data:t}}function g(t){return{type:n["l"],data:t}}function y(t){return{type:n["a"],data:t}}function k(t){return{type:n["s"],data:t}}function N(t){return{type:n["n"],data:t}}function C(t){return{type:n["t"],data:t}}function S(t){return{type:n["b"],data:t}}function w(t){return{type:n["r"],data:t}}function T(t){return{type:n["p"],data:t}}function R(t){return{type:n["c"],data:t}}e["a"]={nextBlock:j,moveBlock:h,speedStart:f,speedRun:v,startLines:x,matrix:O,lock:g,clearLines:y,points:k,reset:C,max:N,drop:S,pause:w,keyboard:d,music:T,focus:R}},94:function(t,e,a){},95:function(t,e,a){},96:function(t,e,a){},97:function(t,e,a){},98:function(t,e,a){},99:function(t,e,a){}},[[104,0,1,2,3]]]);